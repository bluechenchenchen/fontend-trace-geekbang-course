{"version":3,"file":"trace-sdk.esm.js","sources":["../node_modules/web-vitals/dist/web-vitals.js","../node_modules/web-vitals-reporter/src/index.js","../src/core/webvitals.ts","../node_modules/js-base64/base64.mjs","../src/typings/common.ts","../src/core/util.ts","../src/core/fetch.ts","../src/core/fingerprint.ts","../src/core/send.ts","../src/baseTrace.ts","../src/trace.ts","../src/index.ts"],"sourcesContent":["var e,n,t,i,r,a=-1,o=function(e){addEventListener(\"pageshow\",(function(n){n.persisted&&(a=n.timeStamp,e(n))}),!0)},c=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType(\"navigation\")[0]},u=function(){var e=c();return e&&e.activationStart||0},f=function(e,n){var t=c(),i=\"navigate\";a>=0?i=\"back-forward-cache\":t&&(document.prerendering||u()>0?i=\"prerender\":document.wasDiscarded?i=\"restore\":t.type&&(i=t.type.replace(/_/g,\"-\")));return{name:e,value:void 0===n?-1:n,rating:\"good\",delta:0,entries:[],id:\"v3-\".concat(Date.now(),\"-\").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:i}},s=function(e,n,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var i=new PerformanceObserver((function(e){Promise.resolve().then((function(){n(e.getEntries())}))}));return i.observe(Object.assign({type:e,buffered:!0},t||{})),i}}catch(e){}},d=function(e,n,t,i){var r,a;return function(o){n.value>=0&&(o||i)&&((a=n.value-(r||0))||void 0===r)&&(r=n.value,n.delta=a,n.rating=function(e,n){return e>n[1]?\"poor\":e>n[0]?\"needs-improvement\":\"good\"}(n.value,t),e(n))}},l=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},p=function(e){var n=function(n){\"pagehide\"!==n.type&&\"hidden\"!==document.visibilityState||e(n)};addEventListener(\"visibilitychange\",n,!0),addEventListener(\"pagehide\",n,!0)},v=function(e){var n=!1;return function(t){n||(e(t),n=!0)}},m=-1,h=function(){return\"hidden\"!==document.visibilityState||document.prerendering?1/0:0},g=function(e){\"hidden\"===document.visibilityState&&m>-1&&(m=\"visibilitychange\"===e.type?e.timeStamp:0,T())},y=function(){addEventListener(\"visibilitychange\",g,!0),addEventListener(\"prerenderingchange\",g,!0)},T=function(){removeEventListener(\"visibilitychange\",g,!0),removeEventListener(\"prerenderingchange\",g,!0)},E=function(){return m<0&&(m=h(),y(),o((function(){setTimeout((function(){m=h(),y()}),0)}))),{get firstHiddenTime(){return m}}},C=function(e){document.prerendering?addEventListener(\"prerenderingchange\",(function(){return e()}),!0):e()},L=[1800,3e3],w=function(e,n){n=n||{},C((function(){var t,i=E(),r=f(\"FCP\"),a=s(\"paint\",(function(e){e.forEach((function(e){\"first-contentful-paint\"===e.name&&(a.disconnect(),e.startTime<i.firstHiddenTime&&(r.value=Math.max(e.startTime-u(),0),r.entries.push(e),t(!0)))}))}));a&&(t=d(e,r,L,n.reportAllChanges),o((function(i){r=f(\"FCP\"),t=d(e,r,L,n.reportAllChanges),l((function(){r.value=performance.now()-i.timeStamp,t(!0)}))})))}))},b=[.1,.25],S=function(e,n){n=n||{},w(v((function(){var t,i=f(\"CLS\",0),r=0,a=[],c=function(e){e.forEach((function(e){if(!e.hadRecentInput){var n=a[0],t=a[a.length-1];r&&e.startTime-t.startTime<1e3&&e.startTime-n.startTime<5e3?(r+=e.value,a.push(e)):(r=e.value,a=[e])}})),r>i.value&&(i.value=r,i.entries=a,t())},u=s(\"layout-shift\",c);u&&(t=d(e,i,b,n.reportAllChanges),p((function(){c(u.takeRecords()),t(!0)})),o((function(){r=0,i=f(\"CLS\",0),t=d(e,i,b,n.reportAllChanges),l((function(){return t()}))})),setTimeout(t,0))})))},A={passive:!0,capture:!0},I=new Date,P=function(i,r){e||(e=r,n=i,t=new Date,k(removeEventListener),F())},F=function(){if(n>=0&&n<t-I){var r={entryType:\"first-input\",name:e.type,target:e.target,cancelable:e.cancelable,startTime:e.timeStamp,processingStart:e.timeStamp+n};i.forEach((function(e){e(r)})),i=[]}},M=function(e){if(e.cancelable){var n=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;\"pointerdown\"==e.type?function(e,n){var t=function(){P(e,n),r()},i=function(){r()},r=function(){removeEventListener(\"pointerup\",t,A),removeEventListener(\"pointercancel\",i,A)};addEventListener(\"pointerup\",t,A),addEventListener(\"pointercancel\",i,A)}(n,e):P(n,e)}},k=function(e){[\"mousedown\",\"keydown\",\"touchstart\",\"pointerdown\"].forEach((function(n){return e(n,M,A)}))},D=[100,300],x=function(t,r){r=r||{},C((function(){var a,c=E(),u=f(\"FID\"),l=function(e){e.startTime<c.firstHiddenTime&&(u.value=e.processingStart-e.startTime,u.entries.push(e),a(!0))},m=function(e){e.forEach(l)},h=s(\"first-input\",m);a=d(t,u,D,r.reportAllChanges),h&&p(v((function(){m(h.takeRecords()),h.disconnect()}))),h&&o((function(){var o;u=f(\"FID\"),a=d(t,u,D,r.reportAllChanges),i=[],n=-1,e=null,k(addEventListener),o=l,i.push(o),F()}))}))},B=0,R=1/0,H=0,N=function(e){e.forEach((function(e){e.interactionId&&(R=Math.min(R,e.interactionId),H=Math.max(H,e.interactionId),B=H?(H-R)/7+1:0)}))},O=function(){return r?B:performance.interactionCount||0},q=function(){\"interactionCount\"in performance||r||(r=s(\"event\",N,{type:\"event\",buffered:!0,durationThreshold:0}))},j=[200,500],_=0,z=function(){return O()-_},G=[],J={},K=function(e){var n=G[G.length-1],t=J[e.interactionId];if(t||G.length<10||e.duration>n.latency){if(t)t.entries.push(e),t.latency=Math.max(t.latency,e.duration);else{var i={id:e.interactionId,latency:e.duration,entries:[e]};J[i.id]=i,G.push(i)}G.sort((function(e,n){return n.latency-e.latency})),G.splice(10).forEach((function(e){delete J[e.id]}))}},Q=function(e,n){n=n||{},C((function(){var t;q();var i,r=f(\"INP\"),a=function(e){e.forEach((function(e){(e.interactionId&&K(e),\"first-input\"===e.entryType)&&(!G.some((function(n){return n.entries.some((function(n){return e.duration===n.duration&&e.startTime===n.startTime}))}))&&K(e))}));var n,t=(n=Math.min(G.length-1,Math.floor(z()/50)),G[n]);t&&t.latency!==r.value&&(r.value=t.latency,r.entries=t.entries,i())},c=s(\"event\",a,{durationThreshold:null!==(t=n.durationThreshold)&&void 0!==t?t:40});i=d(e,r,j,n.reportAllChanges),c&&(\"PerformanceEventTiming\"in window&&\"interactionId\"in PerformanceEventTiming.prototype&&c.observe({type:\"first-input\",buffered:!0}),p((function(){a(c.takeRecords()),r.value<0&&z()>0&&(r.value=0,r.entries=[]),i(!0)})),o((function(){G=[],_=O(),r=f(\"INP\"),i=d(e,r,j,n.reportAllChanges)})))}))},U=[2500,4e3],V={},W=function(e,n){n=n||{},C((function(){var t,i=E(),r=f(\"LCP\"),a=function(e){var n=e[e.length-1];n&&n.startTime<i.firstHiddenTime&&(r.value=Math.max(n.startTime-u(),0),r.entries=[n],t())},c=s(\"largest-contentful-paint\",a);if(c){t=d(e,r,U,n.reportAllChanges);var m=v((function(){V[r.id]||(a(c.takeRecords()),c.disconnect(),V[r.id]=!0,t(!0))}));[\"keydown\",\"click\"].forEach((function(e){addEventListener(e,(function(){return setTimeout(m,0)}),!0)})),p(m),o((function(i){r=f(\"LCP\"),t=d(e,r,U,n.reportAllChanges),l((function(){r.value=performance.now()-i.timeStamp,V[r.id]=!0,t(!0)}))}))}}))},X=[800,1800],Y=function e(n){document.prerendering?C((function(){return e(n)})):\"complete\"!==document.readyState?addEventListener(\"load\",(function(){return e(n)}),!0):setTimeout(n,0)},Z=function(e,n){n=n||{};var t=f(\"TTFB\"),i=d(e,t,X,n.reportAllChanges);Y((function(){var r=c();if(r){var a=r.responseStart;if(a<=0||a>performance.now())return;t.value=Math.max(a-u(),0),t.entries=[r],i(!0),o((function(){t=f(\"TTFB\",0),(i=d(e,t,X,n.reportAllChanges))(!0)}))}}))};export{b as CLSThresholds,L as FCPThresholds,D as FIDThresholds,j as INPThresholds,U as LCPThresholds,X as TTFBThresholds,S as getCLS,w as getFCP,x as getFID,Q as getINP,W as getLCP,Z as getTTFB,S as onCLS,w as onFCP,x as onFID,Q as onINP,W as onLCP,Z as onTTFB};\n","/**\n * @typedef {Object<string,any>} Result\n * @typedef {import('web-vitals').Metric | Object<string,any>} Metric\n * @typedef {{ effectiveType: 'slow-2g' | '2g' | '3g' | '4g', rtt: number, downlink: number }} NetworkInformation\n *\n * @typedef {object} CreateApiReporterOptions\n * @prop {object} [initial]\n * @prop {(metric: Metric, result: Result) => Result} [mapMetric]\n * @prop {(result: Result) => Result | void} [beforeSend]\n * @prop {(url: string, result: Result) => any} [onSend]\n */\n\n/**\n * Create Web Vitals API reporter, that accepts `Metric` values and sends it to `url`\n * using `navigator.sendBeacon` when available or fallbacks back to XMLHttpRequest.\n *\n * The function sends request only once.\n * Use `onSend` to implement a custom logic.\n *\n * @param {string} url\n * @param {CreateApiReporterOptions} [opts]\n * @return {(metric: Metric) => void}\n */\n\nexport function createApiReporter(url, opts = {}) {\n  let isSent = false\n  let isCalled = false\n  let result = /** @type {Result} */ ({ id: generateUniqueId(), ...opts.initial })\n\n  const sendValues = () => {\n    if (isSent) return // data is already sent\n    if (!isCalled) return // no data collected\n\n    result.duration = now()\n    if (opts.beforeSend) {\n      const newResult = opts.beforeSend(result)\n      if (newResult) result = { ...result, ...newResult }\n    }\n    isSent = true\n    if (opts.onSend) {\n      opts.onSend(url, result)\n    } else {\n      if (typeof navigator === 'undefined') return\n      if (navigator.sendBeacon) return navigator.sendBeacon(url, JSON.stringify(result))\n      const client = new XMLHttpRequest()\n      client.open('POST', url, false) // third parameter indicates sync xhr\n      client.setRequestHeader('Content-Type', 'text/plain;charset=UTF-8')\n      client.send(JSON.stringify(result))\n    }\n  }\n\n  const mapMetric =\n    opts.mapMetric ||\n    function (metric) {\n      const isWebVital = ['FCP', 'TTFB', 'LCP', 'CLS', 'FID'].indexOf(metric.name) !== -1\n      return { [metric.name]: isWebVital ? round(metric.value, metric.name === 'CLS' ? 4 : 0) : metric.value }\n    }\n\n  /** @param {Metric} metric */\n  const report = (metric) => {\n    if (!isCalled) isCalled = true\n    result = { ...result, ...mapMetric(metric, result) }\n  }\n\n  // should be the last call to capture latest CLS\n  setTimeout(() => {\n    // Safari does not fire \"visibilitychange\" on the tab close\n    // So we have 2 options: loose Safari data, or loose LCP/CLS that depends on \"visibilitychange\" logic.\n    // Current solution: if LCP/CLS supported, use `onHidden` otherwise, use `pagehide` to fire the callback in the end.\n    //\n    // More details: https://github.com/treosh/web-vitals-reporter/issues/3\n    const supportedEntryTypes = (PerformanceObserver && PerformanceObserver.supportedEntryTypes) || []\n    const isLatestVisibilityChangeSupported = supportedEntryTypes.indexOf('layout-shift') !== -1\n\n    if (isLatestVisibilityChangeSupported) {\n      const onVisibilityChange = () => {\n        if (document.visibilityState === 'hidden') {\n          sendValues()\n          removeEventListener('visibilitychange', onVisibilityChange, true)\n        }\n      }\n      addEventListener('visibilitychange', onVisibilityChange, true)\n    } else {\n      addEventListener('pagehide', sendValues, { capture: true, once: true })\n    }\n  })\n\n  return report\n}\n\n/**\n * Get device information.\n * - Effective connection type: https://developer.mozilla.org/en-US/docs/Web/API/NetworkInformation\n * - Device memory: https://developer.mozilla.org/en-US/docs/Web/API/Navigator/deviceMemory\n */\n\nexport function getDeviceInfo() {\n  const nav = /** @type {null | (Navigator & { deviceMemory: number, connection: NetworkInformation })} */ (typeof navigator ===\n  'undefined'\n    ? null\n    : navigator)\n  const conn = nav && nav.connection ? nav.connection : null\n  return {\n    url: location ? location.href : null,\n    referrer: document ? document.referrer : null,\n    userAgent: nav ? nav.userAgent : null,\n    memory: nav ? nav.deviceMemory : undefined,\n    cpus: nav ? nav.hardwareConcurrency : undefined,\n    connection: conn ? { effectiveType: conn.effectiveType, rtt: conn.rtt, downlink: conn.downlink } : undefined,\n  }\n}\n\n/**\n * Get time since a session started.\n */\n\nfunction now() {\n  const perf = typeof performance === 'undefined' ? null : performance\n  return perf && perf.now ? round(perf.now()) : null\n}\n\n/**\n * Round, source: https://stackoverflow.com/a/18358056\n *\n * @param {number} val\n * @param {number} [precision]\n * @return {number}\n */\n\nfunction round(val, precision = 0) {\n  // @ts-ignore\n  return +(Math.round(`${val}e+${precision}`) + `e-${precision}`)\n}\n\n/**\n * Generate a unique id, copied from:\n * https://github.com/GoogleChrome/web-vitals/blob/master/src/lib/generateUniqueID.ts\n */\n\nfunction generateUniqueId() {\n  return `v1-${Date.now()}-${Math.floor(Math.random() * (9e12 - 1)) + 1e12}`\n}\n","/*\n * @Author: blue\n * @Date: 2024-08-27 17:25:19\n * @FilePath: /fontend-trace-geekbang-course/src/core/webvitals.ts\n */\nimport { Metric, onCLS, onFID, onLCP, onTTFB, onINP, onFCP } from 'web-vitals'\nimport { createApiReporter, getDeviceInfo } from 'web-vitals-reporter'\n\nconst SCORE_RANGE_LCP: [number, number] = [2500, 4500]\nconst SCORE_RANGE_FID: [number, number] = [100, 300]\nconst SCORE_RANGE_CLS: [number, number] = [0.1, 0.25]\nconst SCORE_RANGE_FCP: [number, number] = [1.8, 3]\nconst SCORE_RANGE_INP: [number, number] = [200, 500]\nconst SCORE_RANGE_TTFB: [number, number] = [800, 1800]\n\nconst score = (value: number, range: [number, number]) => {\n  return value < range[0] ? 'good' : value < range[1] ? 'needs improvement' : 'poor'\n}\n\nexport function generateUniqueId() {\n  return `v1-${Date.now()}-${Math.floor(Math.random() * (9e12 - 1)) + 1e12}`\n}\n\nfunction round(val, precision = 0) {\n  // @ts-ignore\n  return +(Math.round(`${val}e+${precision}`) + `e-${precision}`)\n}\n\nexport function mapMetric(metric) {\n  const isWebVital = ['FCP', 'TTFB', 'LCP', 'CLS', 'FID'].indexOf(metric.name) !== -1\n  return {\n    [metric.name]: isWebVital ? round(metric.value, metric.name === 'CLS' ? 4 : 0) : metric.value,\n    [`${metric.name}Rating`]: metric.rating\n  }\n}\n\nconst sendToAnalytics = createApiReporter('/analytics', {\n  initial: getDeviceInfo(),\n  beforeSend: result => {\n    console.log('beforeSend')\n    const { LCP, FID, CLS } = result\n    console.info('web-vitals: ', result)\n    if (!LCP || !FID || !CLS) return // Core Web Vitals are not supported\n\n    // return extra attributes to merge into the final result\n    return {\n      LCPScore: score(LCP, SCORE_RANGE_LCP),\n      // FIDScore: FID < 100 ? 'good' : FID < 300 ? 'needs improvement' : 'poor',\n      FIDScore: score(FID, SCORE_RANGE_FID),\n      // CLSScore: CLS < 0.1 ? 'good' : CLS < 0.25 ? 'needs improvement' : 'poor'\n      CLSScore: score(CLS, SCORE_RANGE_CLS)\n    }\n  }\n})\n\nexport const onVitals = saveMetric => {\n  console.log('webvitals setup')\n  onLCP(saveMetric)\n  onFID(saveMetric)\n  onCLS(saveMetric)\n  // onTTFB(saveMetric)\n  // onINP(saveMetric)\n  // onFCP(saveMetric)\n}\n\nexport default {}\n","/**\n *  base64.ts\n *\n *  Licensed under the BSD 3-Clause License.\n *    http://opensource.org/licenses/BSD-3-Clause\n *\n *  References:\n *    http://en.wikipedia.org/wiki/Base64\n *\n * @author Dan Kogai (https://github.com/dankogai)\n */\nconst version = '3.7.7';\n/**\n * @deprecated use lowercase `version`.\n */\nconst VERSION = version;\nconst _hasBuffer = typeof Buffer === 'function';\nconst _TD = typeof TextDecoder === 'function' ? new TextDecoder() : undefined;\nconst _TE = typeof TextEncoder === 'function' ? new TextEncoder() : undefined;\nconst b64ch = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nconst b64chs = Array.prototype.slice.call(b64ch);\nconst b64tab = ((a) => {\n    let tab = {};\n    a.forEach((c, i) => tab[c] = i);\n    return tab;\n})(b64chs);\nconst b64re = /^(?:[A-Za-z\\d+\\/]{4})*?(?:[A-Za-z\\d+\\/]{2}(?:==)?|[A-Za-z\\d+\\/]{3}=?)?$/;\nconst _fromCC = String.fromCharCode.bind(String);\nconst _U8Afrom = typeof Uint8Array.from === 'function'\n    ? Uint8Array.from.bind(Uint8Array)\n    : (it) => new Uint8Array(Array.prototype.slice.call(it, 0));\nconst _mkUriSafe = (src) => src\n    .replace(/=/g, '').replace(/[+\\/]/g, (m0) => m0 == '+' ? '-' : '_');\nconst _tidyB64 = (s) => s.replace(/[^A-Za-z0-9\\+\\/]/g, '');\n/**\n * polyfill version of `btoa`\n */\nconst btoaPolyfill = (bin) => {\n    // console.log('polyfilled');\n    let u32, c0, c1, c2, asc = '';\n    const pad = bin.length % 3;\n    for (let i = 0; i < bin.length;) {\n        if ((c0 = bin.charCodeAt(i++)) > 255 ||\n            (c1 = bin.charCodeAt(i++)) > 255 ||\n            (c2 = bin.charCodeAt(i++)) > 255)\n            throw new TypeError('invalid character found');\n        u32 = (c0 << 16) | (c1 << 8) | c2;\n        asc += b64chs[u32 >> 18 & 63]\n            + b64chs[u32 >> 12 & 63]\n            + b64chs[u32 >> 6 & 63]\n            + b64chs[u32 & 63];\n    }\n    return pad ? asc.slice(0, pad - 3) + \"===\".substring(pad) : asc;\n};\n/**\n * does what `window.btoa` of web browsers do.\n * @param {String} bin binary string\n * @returns {string} Base64-encoded string\n */\nconst _btoa = typeof btoa === 'function' ? (bin) => btoa(bin)\n    : _hasBuffer ? (bin) => Buffer.from(bin, 'binary').toString('base64')\n        : btoaPolyfill;\nconst _fromUint8Array = _hasBuffer\n    ? (u8a) => Buffer.from(u8a).toString('base64')\n    : (u8a) => {\n        // cf. https://stackoverflow.com/questions/12710001/how-to-convert-uint8-array-to-base64-encoded-string/12713326#12713326\n        const maxargs = 0x1000;\n        let strs = [];\n        for (let i = 0, l = u8a.length; i < l; i += maxargs) {\n            strs.push(_fromCC.apply(null, u8a.subarray(i, i + maxargs)));\n        }\n        return _btoa(strs.join(''));\n    };\n/**\n * converts a Uint8Array to a Base64 string.\n * @param {boolean} [urlsafe] URL-and-filename-safe a la RFC4648 §5\n * @returns {string} Base64 string\n */\nconst fromUint8Array = (u8a, urlsafe = false) => urlsafe ? _mkUriSafe(_fromUint8Array(u8a)) : _fromUint8Array(u8a);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const utob = (src: string) => unescape(encodeURIComponent(src));\n// reverting good old fationed regexp\nconst cb_utob = (c) => {\n    if (c.length < 2) {\n        var cc = c.charCodeAt(0);\n        return cc < 0x80 ? c\n            : cc < 0x800 ? (_fromCC(0xc0 | (cc >>> 6))\n                + _fromCC(0x80 | (cc & 0x3f)))\n                : (_fromCC(0xe0 | ((cc >>> 12) & 0x0f))\n                    + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n                    + _fromCC(0x80 | (cc & 0x3f)));\n    }\n    else {\n        var cc = 0x10000\n            + (c.charCodeAt(0) - 0xD800) * 0x400\n            + (c.charCodeAt(1) - 0xDC00);\n        return (_fromCC(0xf0 | ((cc >>> 18) & 0x07))\n            + _fromCC(0x80 | ((cc >>> 12) & 0x3f))\n            + _fromCC(0x80 | ((cc >>> 6) & 0x3f))\n            + _fromCC(0x80 | (cc & 0x3f)));\n    }\n};\nconst re_utob = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFFF]|[^\\x00-\\x7F]/g;\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-8 string\n * @returns {string} UTF-16 string\n */\nconst utob = (u) => u.replace(re_utob, cb_utob);\n//\nconst _encode = _hasBuffer\n    ? (s) => Buffer.from(s, 'utf8').toString('base64')\n    : _TE\n        ? (s) => _fromUint8Array(_TE.encode(s))\n        : (s) => _btoa(utob(s));\n/**\n * converts a UTF-8-encoded string to a Base64 string.\n * @param {boolean} [urlsafe] if `true` make the result URL-safe\n * @returns {string} Base64 string\n */\nconst encode = (src, urlsafe = false) => urlsafe\n    ? _mkUriSafe(_encode(src))\n    : _encode(src);\n/**\n * converts a UTF-8-encoded string to URL-safe Base64 RFC4648 §5.\n * @returns {string} Base64 string\n */\nconst encodeURI = (src) => encode(src, true);\n// This trick is found broken https://github.com/dankogai/js-base64/issues/130\n// const btou = (src: string) => decodeURIComponent(escape(src));\n// reverting good old fationed regexp\nconst re_btou = /[\\xC0-\\xDF][\\x80-\\xBF]|[\\xE0-\\xEF][\\x80-\\xBF]{2}|[\\xF0-\\xF7][\\x80-\\xBF]{3}/g;\nconst cb_btou = (cccc) => {\n    switch (cccc.length) {\n        case 4:\n            var cp = ((0x07 & cccc.charCodeAt(0)) << 18)\n                | ((0x3f & cccc.charCodeAt(1)) << 12)\n                | ((0x3f & cccc.charCodeAt(2)) << 6)\n                | (0x3f & cccc.charCodeAt(3)), offset = cp - 0x10000;\n            return (_fromCC((offset >>> 10) + 0xD800)\n                + _fromCC((offset & 0x3FF) + 0xDC00));\n        case 3:\n            return _fromCC(((0x0f & cccc.charCodeAt(0)) << 12)\n                | ((0x3f & cccc.charCodeAt(1)) << 6)\n                | (0x3f & cccc.charCodeAt(2)));\n        default:\n            return _fromCC(((0x1f & cccc.charCodeAt(0)) << 6)\n                | (0x3f & cccc.charCodeAt(1)));\n    }\n};\n/**\n * @deprecated should have been internal use only.\n * @param {string} src UTF-16 string\n * @returns {string} UTF-8 string\n */\nconst btou = (b) => b.replace(re_btou, cb_btou);\n/**\n * polyfill version of `atob`\n */\nconst atobPolyfill = (asc) => {\n    // console.log('polyfilled');\n    asc = asc.replace(/\\s+/g, '');\n    if (!b64re.test(asc))\n        throw new TypeError('malformed base64.');\n    asc += '=='.slice(2 - (asc.length & 3));\n    let u24, bin = '', r1, r2;\n    for (let i = 0; i < asc.length;) {\n        u24 = b64tab[asc.charAt(i++)] << 18\n            | b64tab[asc.charAt(i++)] << 12\n            | (r1 = b64tab[asc.charAt(i++)]) << 6\n            | (r2 = b64tab[asc.charAt(i++)]);\n        bin += r1 === 64 ? _fromCC(u24 >> 16 & 255)\n            : r2 === 64 ? _fromCC(u24 >> 16 & 255, u24 >> 8 & 255)\n                : _fromCC(u24 >> 16 & 255, u24 >> 8 & 255, u24 & 255);\n    }\n    return bin;\n};\n/**\n * does what `window.atob` of web browsers do.\n * @param {String} asc Base64-encoded string\n * @returns {string} binary string\n */\nconst _atob = typeof atob === 'function' ? (asc) => atob(_tidyB64(asc))\n    : _hasBuffer ? (asc) => Buffer.from(asc, 'base64').toString('binary')\n        : atobPolyfill;\n//\nconst _toUint8Array = _hasBuffer\n    ? (a) => _U8Afrom(Buffer.from(a, 'base64'))\n    : (a) => _U8Afrom(_atob(a).split('').map(c => c.charCodeAt(0)));\n/**\n * converts a Base64 string to a Uint8Array.\n */\nconst toUint8Array = (a) => _toUint8Array(_unURI(a));\n//\nconst _decode = _hasBuffer\n    ? (a) => Buffer.from(a, 'base64').toString('utf8')\n    : _TD\n        ? (a) => _TD.decode(_toUint8Array(a))\n        : (a) => btou(_atob(a));\nconst _unURI = (a) => _tidyB64(a.replace(/[-_]/g, (m0) => m0 == '-' ? '+' : '/'));\n/**\n * converts a Base64 string to a UTF-8 string.\n * @param {String} src Base64 string.  Both normal and URL-safe are supported\n * @returns {string} UTF-8 string\n */\nconst decode = (src) => _decode(_unURI(src));\n/**\n * check if a value is a valid Base64 string\n * @param {String} src a value to check\n  */\nconst isValid = (src) => {\n    if (typeof src !== 'string')\n        return false;\n    const s = src.replace(/\\s+/g, '').replace(/={0,2}$/, '');\n    return !/[^\\s0-9a-zA-Z\\+/]/.test(s) || !/[^\\s0-9a-zA-Z\\-_]/.test(s);\n};\n//\nconst _noEnum = (v) => {\n    return {\n        value: v, enumerable: false, writable: true, configurable: true\n    };\n};\n/**\n * extend String.prototype with relevant methods\n */\nconst extendString = function () {\n    const _add = (name, body) => Object.defineProperty(String.prototype, name, _noEnum(body));\n    _add('fromBase64', function () { return decode(this); });\n    _add('toBase64', function (urlsafe) { return encode(this, urlsafe); });\n    _add('toBase64URI', function () { return encode(this, true); });\n    _add('toBase64URL', function () { return encode(this, true); });\n    _add('toUint8Array', function () { return toUint8Array(this); });\n};\n/**\n * extend Uint8Array.prototype with relevant methods\n */\nconst extendUint8Array = function () {\n    const _add = (name, body) => Object.defineProperty(Uint8Array.prototype, name, _noEnum(body));\n    _add('toBase64', function (urlsafe) { return fromUint8Array(this, urlsafe); });\n    _add('toBase64URI', function () { return fromUint8Array(this, true); });\n    _add('toBase64URL', function () { return fromUint8Array(this, true); });\n};\n/**\n * extend Builtin prototypes with relevant methods\n */\nconst extendBuiltins = () => {\n    extendString();\n    extendUint8Array();\n};\nconst gBase64 = {\n    version: version,\n    VERSION: VERSION,\n    atob: _atob,\n    atobPolyfill: atobPolyfill,\n    btoa: _btoa,\n    btoaPolyfill: btoaPolyfill,\n    fromBase64: decode,\n    toBase64: encode,\n    encode: encode,\n    encodeURI: encodeURI,\n    encodeURL: encodeURI,\n    utob: utob,\n    btou: btou,\n    decode: decode,\n    isValid: isValid,\n    fromUint8Array: fromUint8Array,\n    toUint8Array: toUint8Array,\n    extendString: extendString,\n    extendUint8Array: extendUint8Array,\n    extendBuiltins: extendBuiltins\n};\n// makecjs:CUT //\nexport { version };\nexport { VERSION };\nexport { _atob as atob };\nexport { atobPolyfill };\nexport { _btoa as btoa };\nexport { btoaPolyfill };\nexport { decode as fromBase64 };\nexport { encode as toBase64 };\nexport { utob };\nexport { encode };\nexport { encodeURI };\nexport { encodeURI as encodeURL };\nexport { btou };\nexport { decode };\nexport { isValid };\nexport { fromUint8Array };\nexport { toUint8Array };\nexport { extendString };\nexport { extendUint8Array };\nexport { extendBuiltins };\n// and finally,\nexport { gBase64 as Base64 };\n","export enum TraceDataSeverity {\n  // 其他\n  Else = 'else',\n  // 错误级别\n  Error = 'error',\n  // 告警级别\n  Warning = 'warning',\n  // 日志级别\n  Info = 'info',\n  // 调试级别\n  Debug = 'debug',\n  /** 上报的错误等级 */\n  // 低危级别\n  Low = 'low',\n  // 普通级别\n  Normal = 'normal',\n  // 高危级别\n  High = 'high',\n  // 极其严重\n  Critical = 'critical'\n}\n\nexport enum TraceTypes {\n  // PVUV\n  PAGE_VIEW = 'PageView',\n  // Event\n  EVENT = 'EVENT',\n  // 性能\n  PERF = 'Perf',\n  // 资源\n  RESOURCE = 'Resource',\n  // 动作、行为类型\n  ACTION = 'Action',\n  // 请求类型\n  FETCH = 'Fetch',\n  // 代码错误\n  CODE_ERROR = 'CodeError',\n  // 日志\n  CONSOLE = 'Console',\n  // 其它\n  CUSTOMER = 'Customer'\n}\n\nexport enum TraceClientTypes {\n  // 安卓\n  ANDROID_H5 = 'android',\n  // iOS\n  IOS_H5 = 'ios',\n  // PC端\n  PC_H5 = 'pc',\n  // 浏览器\n  BROWSER_H5 = 'browser'\n}\n\nexport enum BrowserType {\n  // 手机端浏览器\n  MOBILE = 'mobile',\n  // PC浏览器\n  PC = 'pc',\n  // webview\n  WEBVIEW = 'webview',\n  // 小程序\n  MINI_PROGRAM = 'miniProgram'\n}\n\nexport enum TraceLevelType {\n  // 告警级别\n  Error = 'error',\n  // 预警级别\n  Warn = 'warn',\n  // 普通日志\n  Info = 'info',\n  // 调试日志\n  Debug = 'debug'\n}\n\nexport enum BreadcrumbTypes {\n  ROUTE = 'Route',\n  CLICK = 'UI.Click',\n  CONSOLE = 'Console',\n  FETCH = 'Fetch',\n  UNHANDLEDREJECTION = 'Unhandledrejection',\n  RESOURCE = 'Resource',\n  CODE_ERROR = 'Code Error',\n  CUSTOMER = 'Customer'\n}\n\nexport enum TraceDataTypes {\n  UNKNOWN = 'UNKNOWN',\n  UNKNOWN_FUNCTION = 'UNKNOWN_FUNCTION',\n  JAVASCRIPT = 'JAVASCRIPT',\n  LOG = 'LOG',\n  HTTP = 'HTTP',\n  VUE = 'VUE',\n  REACT = 'REACT',\n  RESOURCE = 'RESOURCE',\n  PROMISE = 'PROMISE',\n  ROUTE = 'ROUTE',\n  PERF = 'PERF'\n}\n\nexport enum BreadcrumbsCategorys {\n  Http = 'http',\n  User = 'user',\n  Debug = 'debug',\n  Exception = 'exception',\n  Lifecycle = 'lifecycle'\n}\n\nexport enum TraceBaseDataName {\n  Fetch = 'Fetch',\n  TypeError = 'TypeError',\n  Unhandledrejection = 'Unhandledrejection',\n  Log = 'Log',\n  Perf = 'Perf',\n  Resource = 'Resource'\n}\n","import {\n  BreadcrumbTypes,\n  TraceDataSeverity,\n  TraceDataTypes,\n  BreadcrumbsCategorys,\n  TraceLevelType,\n  TraceTypes\n} from '../typings/common'\n\n// 获取时间\nexport const getTimestamp = (): number => Date.now()\n\nexport const getFetchStatusLevel = (status: number): TraceDataSeverity => {\n  if (status >= 500) {\n    return TraceDataSeverity.Critical\n  } else if (status >= 400) {\n    return TraceDataSeverity.Error\n  } else if (status >= 300) {\n    return TraceDataSeverity.Warning\n  } else if (status >= 200) {\n    return TraceDataSeverity.Info\n  } else {\n    return TraceDataSeverity.Else\n  }\n}\n\nexport const isResourceTarget = (target: HTMLElement) =>\n  target instanceof HTMLScriptElement ||\n  target instanceof HTMLLinkElement ||\n  target instanceof HTMLImageElement ||\n  target instanceof HTMLVideoElement ||\n  target instanceof HTMLAudioElement\n\n/**\n * 根据字符串生成hashcode\n *\n * @export\n * @param {string} str\n * @return {*}  {number} 可为正数和负数\n */\nexport function hashCode(str: string): number {\n  let hash = 0\n  if (str.length == 0) return hash\n  for (let i = 0; i < str.length; i++) {\n    const char = str.charCodeAt(i)\n    hash = (hash << 5) - hash + char\n    hash = hash & hash\n  }\n  return hash\n}\n\nexport function dataTypes2BreadcrumbsType(data: TraceDataTypes) {\n  switch (data) {\n    case TraceDataTypes.JAVASCRIPT:\n    case TraceDataTypes.UNKNOWN:\n    case TraceDataTypes.UNKNOWN_FUNCTION:\n    case TraceDataTypes.REACT:\n    case TraceDataTypes.VUE:\n      return BreadcrumbTypes.CODE_ERROR\n    case TraceDataTypes.PROMISE:\n      return BreadcrumbTypes.UNHANDLEDREJECTION\n    case TraceDataTypes.HTTP:\n      return BreadcrumbTypes.FETCH\n    case TraceDataTypes.PERF:\n    case TraceDataTypes.LOG:\n      return BreadcrumbTypes.CONSOLE\n    case TraceDataTypes.RESOURCE:\n      return BreadcrumbTypes.RESOURCE\n    case TraceDataTypes.ROUTE:\n      return BreadcrumbTypes.ROUTE\n    default:\n      return BreadcrumbTypes.CUSTOMER\n  }\n}\n\nexport function dataCategory2BreadcrumbsCategory(data: TraceDataTypes) {\n  switch (data) {\n    case TraceDataTypes.JAVASCRIPT:\n    case TraceDataTypes.UNKNOWN:\n    case TraceDataTypes.UNKNOWN_FUNCTION:\n      return BreadcrumbsCategorys.Exception\n    case TraceDataTypes.REACT:\n    case TraceDataTypes.VUE:\n      return BreadcrumbsCategorys.Lifecycle\n    case TraceDataTypes.PROMISE:\n      return BreadcrumbsCategorys.Exception\n    case TraceDataTypes.HTTP:\n      return BreadcrumbsCategorys.Http\n    case TraceDataTypes.PERF:\n    case TraceDataTypes.LOG:\n      return BreadcrumbsCategorys.Debug\n    case TraceDataTypes.RESOURCE:\n      return BreadcrumbsCategorys.Http\n    case TraceDataTypes.ROUTE:\n      return BreadcrumbsCategorys.Lifecycle\n  }\n}\n\nexport function getTraceDataLevel(level: TraceDataSeverity) {\n  switch (level) {\n    case TraceDataSeverity.High:\n    case TraceDataSeverity.Critical:\n    case TraceDataSeverity.Error:\n      return TraceLevelType.Error\n    case TraceDataSeverity.Warning:\n      return TraceLevelType.Warn\n    case TraceDataSeverity.Debug:\n    case TraceDataSeverity.Low:\n      return TraceLevelType.Debug\n    default:\n      return TraceLevelType.Info\n  }\n}\n\nexport function getTraceDataType(type: TraceDataTypes) {\n  switch (type) {\n    case TraceDataTypes.PROMISE:\n    case TraceDataTypes.UNKNOWN:\n    case TraceDataTypes.UNKNOWN_FUNCTION:\n    case TraceDataTypes.JAVASCRIPT:\n      return TraceTypes.CODE_ERROR\n    case TraceDataTypes.REACT:\n    case TraceDataTypes.VUE:\n    case TraceDataTypes.ROUTE:\n      return TraceTypes.EVENT\n    case TraceDataTypes.PERF:\n      return TraceTypes.PERF\n    case TraceDataTypes.HTTP:\n      return TraceTypes.FETCH\n    case TraceDataTypes.RESOURCE:\n      return TraceTypes.RESOURCE\n    default:\n      return TraceTypes.CUSTOMER\n  }\n}\n\nexport function getPerfLevel(data: TracePerf) {\n  let level = TraceLevelType.Info\n  if (\n    data.LCPRating === 'poor' ||\n    data.FIDRating === 'poor' ||\n    data.FCPRating === 'poor' ||\n    data.TTFBRating === 'poor' ||\n    data.CLSRating === 'poor' ||\n    data.INPRating === 'poor'\n  ) {\n    // console.log('[getPerfLevel] error')\n    level = TraceLevelType.Error\n    return\n  }\n  if (\n    data.LCPRating === 'needs improvement' ||\n    data.CLSRating === 'needs improvement' ||\n    data.FCPRating === 'needs improvement' ||\n    data.FIDRating === 'needs improvement' ||\n    data.INPRating === 'needs improvement' ||\n    data.TTFBRating === 'needs improvement'\n  ) {\n    // console.log('[getPerfLevel] warn')\n    level = TraceLevelType.Warn\n    return\n  }\n  return level\n}\n\nexport function uuid() {\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n    /* tslint:disable */\n    const r = (Math.random() * 16) | 0\n    /* tslint:disable */\n    const v = c === 'x' ? r : (r & 0x3) | 0x8\n\n    return v.toString(16)\n  })\n}\n\nexport function safeStringify(obj: object): string {\n  const set = new Set()\n  const str = JSON.stringify(obj, function(_key, value) {\n    if (set.has(value)) {\n      return ''\n    }\n    typeof value === 'object' && set.add(value)\n    return value\n  })\n  set.clear()\n  return str\n}\n","import { encode } from 'js-base64'\nimport { getTimestamp, uuid } from './util'\n\nconst { fetch: originFetch } = window\n\n// 拦截fetch\n// window.fetch = async (...args: any) => {\n//   const [url, options] = args;\n\n//   const res = await originFetch(url, options);\n\n//   return res\n// }\n\nexport type OnFetchError = {\n  url: string\n  status: number\n  statusText: string\n  method: 'POST' | 'GET'\n  body: any\n  elapsedTime: number\n}\n\nexport type OnBeforeProps = {\n  url: string\n  method: 'POST' | 'GET'\n  options?: RequestInit\n}\n\nexport type InterceptFetchType = {\n  pagePath: string\n  onError: (error: OnFetchError) => void\n  onBefore?: (props: OnBeforeProps) => void\n  onAfter?: (result: any) => void\n}\n\n// 拦截fetch\nconst interceptFetch = ({ pagePath, onError, onBefore, onAfter }: InterceptFetchType) => {\n  return async (...args: any) => {\n    let [url, options] = args\n    const startTime = getTimestamp()\n\n    const traceId = uuid()\n    const traceSegmentId = uuid()\n    const appId = uuid()\n    const appVersion = 'v1.0.0'\n\n    if (Object.prototype.toString.call(args[0]) === '[object Request]') {\n      url = new URL(url.url)\n    } else {\n      if (args[0].startsWith('http://') || args[0].startsWith('https://')) {\n        url = new URL(args[0])\n      } else if (args[0].startsWith('//')) {\n        url = new URL(`${window.location.protocol}${args[0]}`)\n      } else {\n        url = new URL(window.location.href)\n        url.pathname = args[0]\n      }\n    }\n\n    const traceIdStr = String(encode(traceId))\n    const segmentId = String(encode(traceSegmentId))\n    const service = String(encode(appId))\n    const instance = String(encode(appVersion))\n    const endpoint = String(encode(pagePath))\n    const peer = String(encode(url.host))\n    const index = 1\n    const values = `${1}-${traceIdStr}-${segmentId}-${index}-${service}-${instance}-${endpoint}-${peer}`\n\n    if (!options) {\n      options = {}\n    }\n    if (!options.headers) {\n      options.headers = {}\n    }\n    options.headers['sw8'] = values\n\n    let res\n    try {\n      onBefore &&\n        onBefore({\n          url,\n          method: options.method,\n          options\n        })\n      res = await originFetch(url, options)\n\n      onAfter && onAfter(res)\n    } catch (err) {\n      if (!!options.signal && err.name == 'AbortError') {\n        onError({\n          url,\n          status: res.status,\n          statusText: res.statusText,\n          method: options.method,\n          body: options.body,\n          elapsedTime: getTimestamp() - startTime\n        })\n      } else {\n        throw err\n      }\n    }\n    if (!(res.ok && res.status >= 200 && res.status < 300)) {\n      onError({\n        url,\n        status: res.status,\n        statusText: res.statusText,\n        method: options.method,\n        body: options.body,\n        elapsedTime: getTimestamp() - startTime\n      })\n    }\n\n    return res\n  }\n}\n\nexport default interceptFetch\n","/*\n * @Author: blue\n * @Date: 2024-08-27 17:25:19\n * @FilePath: /fontend-trace-geekbang-course/src/core/fingerprint.ts\n */\n// https://www.cnblogs.com/cute/p/13142139.html\nfunction bin2hex(str: string) {\n  // discuss at: http://phpjs.org/functions/bin2hex/\n  // original by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n  // bugfixed by: Onno Marsman\n  // bugfixed by: Linuxworld\n  // improved by: ntoniazzi (http://phpjs.org/functions/bin2hex:361#comment_177616)\n  // example 1: bin2hex('Kev');\n  // returns 1: '4b6576'\n  // example 2: bin2hex(String.fromCharCode(0x00));\n  // returns 2: '00'\n\n  // https://gist.github.com/cythrawll/8603752\n\n  // let i = 0\n  let o = ''\n  // let l: number\n  let n = null\n  str += ''\n  for (let i = 0, l = str.length; i < l; i++) {\n    n = str.charCodeAt(i).toString(16)\n    o += n.length < 2 ? '0' + n : n\n  }\n\n  return o\n}\n\ntype FingerprintOptions = {\n  font?: string\n  reactStyle?: string | CanvasGradient | CanvasPattern\n  contentStyle?: string | CanvasGradient | CanvasPattern\n  textBaseline?: CanvasTextBaseline\n}\n\nconst DEFAULT_FINGPRINT_OPTIONS: FingerprintOptions = {\n  font: \"14px 'Arial'\",\n  reactStyle: '#f60',\n  contentStyle: '#f60',\n  textBaseline: 'top'\n}\n\n/**\n * 生成唯一ID（非用户ID）\n * 通过HTML5 Canvas API创建一个接近不重复的唯一指纹ID\n * @param content\n * @returns\n */\nexport const getFingerprintId = (content: string, options?: FingerprintOptions) => {\n  if (!content) {\n    console.error('content is empty')\n    return null\n  }\n  const canvas = document.createElement('canvas')\n  const ctx = canvas.getContext('2d')\n  // 如果不存在，则返回空值，说明不支持Canvas指纹\n  if (!ctx) return null\n\n  const txt = content || 'geekbang'\n  ctx.textBaseline = options && options.textBaseline ? options.textBaseline : 'top'\n  ctx.font = options && options.font ? options.font : \"14px 'Arial'\"\n\n  ctx.fillStyle = options && options.reactStyle ? options.reactStyle : '#f60'\n  // 先画一个62x20矩形内容\n  ctx.fillRect(125, 1, 62, 20)\n\n  ctx.fillStyle = options && options.contentStyle ? options.contentStyle : '#069'\n  // 把字填充到矩形内\n  ctx.fillText(txt, 2, 15)\n  // ctx.fillStyle = \"rgba(102, 204, 0, 0.7)\";\n  // ctx.fillText(txt, 4, 17);\n\n  const b64 = canvas.toDataURL().replace('data:image/png;base64,', '')\n  const bin = atob(b64)\n  const crc = bin2hex(bin.slice(-16, -12))\n  return crc\n}\n","/*\n * @Author: blue\n * @Date: 2024-08-27 17:25:19\n * @FilePath: /fontend-trace-geekbang-course/src/core/send.ts\n */\nimport { safeStringify } from './util'\n\n// 使用sendBeacon发送数据\nexport function sendBeacon(url: string, data: TraceData) {\n  if (typeof navigator === 'undefined') return\n  navigator.sendBeacon && navigator.sendBeacon(url, JSON.stringify(data))\n}\n\n// 使用img发送数据\nexport function sendByImg(url: string, data: TraceData) {\n  const spliceStr = url.indexOf('?') === -1 ? '?' : '&'\n  const imageUrl = `${url}${spliceStr}data=${encodeURIComponent(safeStringify(data))}`\n  let img = new Image()\n  img.src = imageUrl\n  img.onload = function() {\n    console.log('Tracking data sent successfully!')\n    img = null\n  }\n  img.onerror = function(err) {\n    console.error('Failed to send tracking data.', err)\n    img = null\n  }\n}\n\n// 使用XMLHttpRequest发送数据\nexport function sendByXHR(url: string, data: TraceData) {\n  const xhr = new XMLHttpRequest()\n  xhr.open('get', url)\n  xhr.setRequestHeader('Content-Type', 'application/json;charset=UTF-8')\n  xhr.withCredentials = true\n  xhr.send(safeStringify(data))\n}\n","\nimport { BaseTraceInterface } from './core/interface';\nimport { onVitals, mapMetric, generateUniqueId } from './core/webvitals';\nimport interceptFetch, { OnBeforeProps, OnFetchError } from './core/fetch';\nimport { dataCategory2BreadcrumbsCategory, dataTypes2BreadcrumbsType, getPerfLevel, getTimestamp, getTraceDataLevel, getTraceDataType, hashCode, isResourceTarget, uuid } from './core/util';\nimport { BreadcrumbTypes, BreadcrumbsCategorys, BrowserType, TraceClientTypes, TraceDataSeverity, TraceDataTypes, TraceLevelType, TraceTypes } from './typings/common'\nimport { getFingerprintId } from './core/fingerprint';\nimport { sendByImg } from './core/send';\n\nexport interface TraceOptions {\n  perfOnSend: () => void;\n  perfBeforeSend: () => void;\n  dsn: string\n  debug?: boolean\n  appId: string\n}\n\nexport class BaseTrace implements BaseTraceInterface {\n\n  // 日志上报后端API\n  public dsn: string = ''\n  // 页面ID\n  public pageId: string = ''\n  //\n  public userAgent = navigator.userAgent\n  //\n  public browserType = BrowserType.MOBILE\n  // fingerprintId\n  public fpId = ''\n  // user id\n  public uid = ''\n  // appId\n  public appId = ''\n\n  // 是否开启debug状态\n  public debug = true;\n\n  // 性能日志数据\n  public perfData: TracePerf = {\n    id: ''\n  }\n\n  // 存储错误资源数据\n  public resources: TraceDataResource[] = []\n\n  public result = {}\n\n  // 记录用户行为\n  public breadcrumb: TraceBreadcrumbs = []\n\n  // 最大存储用户行为\n  public maxBreadcrumb = 10\n\n  // 是否开启用户行为\n  public breadcrumbEnabled = true\n\n  public observer = null\n\n  // 存储链路日志数据\n  public queue: TraceData[] = []\n\n  // 发送请求时间间隔\n  public sendTimer = 1000\n\n  public constructor(options: TraceOptions) {\n    console.log('BaseTrace constructor.')\n    this.pageId = uuid()\n    this.dsn = options.dsn\n    this.appId = options.appId\n    this.debug = !!options.debug\n    this.perfData = {\n      id: generateUniqueId()\n    }\n    this.fpId = getFingerprintId('TraceCourse')\n\n    this.observer = new PerformanceObserver((list, observer) => {\n      list.getEntries().forEach((entry) => {\n        this.debug && console.debug(`name    : ${entry.name}`);\n        this.debug && console.debug(`type    : ${entry.entryType}`);\n        this.debug && console.debug(`duration: ${entry.duration}`);\n        if (entry.entryType === 'resource') {\n          this.handleObserverResource(entry as PerformanceResourceTiming)\n        }\n      });\n    });\n  }\n\n\n\n  public log(log: TraceDataLog) {\n    this.saveBreadcrumb({\n      name: 'customer-log',\n      level: log.level,\n      type: dataTypes2BreadcrumbsType(log.type),\n      category: dataCategory2BreadcrumbsCategory(log.type),\n      message: log.message,\n      time: getTimestamp(),\n    })\n    this.debug && console.debug(`log: ${JSON.stringify(log)}`);\n    this.send(log)\n  }\n\n  public info(message: string, tag?: string) {\n    this.log({\n      name: 'customer-info',\n      type: TraceDataTypes.LOG,\n      level: TraceDataSeverity.Info,\n      message,\n      time: getTimestamp(),\n      dataId: hashCode(`${message}|${tag || ''}`),\n      tag,\n    })\n  }\n\n  public warn(message: string, tag?: string) {\n    this.log({\n      name: 'customer-warning',\n      type: TraceDataTypes.LOG,\n      level: TraceDataSeverity.Warning,\n      message,\n      time: getTimestamp(),\n      dataId: hashCode(`${message}|${tag || ''}`),\n      tag,\n    })\n  }\n\n  public error(message: string, tag?: string) {\n    this.log({\n      name: 'customer-error',\n      type: TraceDataTypes.LOG,\n      level: TraceDataSeverity.Error,\n      message,\n      time: getTimestamp(),\n      dataId: hashCode(`${message}|${tag || ''}`),\n      tag,\n    })\n  }\n\n  public setTraceData(data: TraceTypeData | TracePerf) {\n    let type = TraceTypes.CONSOLE\n    let level = TraceLevelType.Debug\n    let _data = null\n    let perf = null\n\n    if (!!(data as TraceTypeData).dataId) {\n      type = getTraceDataType((data as TraceTypeData).type)\n      level = getTraceDataLevel((data as TraceTypeData).level)\n      _data = data as TraceTypeData\n    }\n    if (!!(data as TracePerf).id) {\n      type = TraceTypes.PERF\n      level = getPerfLevel(data as TracePerf)\n      perf = data as TracePerf\n    }\n\n    const traceData: TraceData = {\n      type,\n      level,\n      createdAt: getTimestamp(),\n      updatedAt: getTimestamp(),\n      data: _data,\n      perf,\n      breadcrumbs: this.breadcrumb,\n      traceId: uuid(),\n      ua: this.userAgent,\n      bt: this.browserType,\n      fpId: this.fpId,\n      appId: this.appId,\n      clientType: TraceClientTypes.BROWSER_H5,\n      url: document.URL,\n      pid: this.pageId,\n      uid: this.uid,\n    }\n    this.debug && console.log('[setTraceData]traceData: ',traceData)\n    return traceData\n  }\n\n  public send(data: TraceTypeData | TracePerf) {\n    const traceData = this.setTraceData(data)\n    sendByImg(this.dsn, traceData)\n  }\n\n  createPerfReport() {\n    const report = (metric) => {\n      this.perfData = { ...this.perfData, ...mapMetric(metric) };\n    };\n\n    setTimeout(() => {\n      const supportedEntryTypes = (PerformanceObserver && PerformanceObserver.supportedEntryTypes) || []\n      const isLatestVisibilityChangeSupported = supportedEntryTypes.indexOf('layout-shift') !== -1\n\n      if (isLatestVisibilityChangeSupported) {\n        const onVisibilityChange = () => {\n          if (document.visibilityState === 'hidden') {\n            console.log('this.send', this.perfData)\n            this.send(this.perfData)\n            // removeEventListener('visibilitychange', onVisibilityChange, true)\n          }\n        }\n        addEventListener('visibilitychange', onVisibilityChange, true)\n      } else {\n        addEventListener('pagehide', () => {\n          console.log('pagehide', this.perfData)\n          this.send(this.perfData)\n        }, { capture: true, once: true })\n      }\n    })\n\n    return report\n  }\n\n  public saveError(event: ErrorEvent) {\n    console.log('[onResourceError] event: ', event)\n    const target = event.target || event.srcElement;\n    const isResTarget = isResourceTarget(target as HTMLElement);\n\n    if (!isResTarget) {\n      const traceData: TraceTypeData = {\n        dataId: hashCode(`${event.type}-${event.error.stack}`),\n        name: 'script-error',\n        level: TraceDataSeverity.Error,\n        message: event.message,\n        time: getTimestamp(),\n        type: TraceDataTypes.JAVASCRIPT,\n        stack: event.error.stack\n      }\n      this.resources.push(traceData)\n      this.breadcrumb.push({\n        name: event.error.name,\n        type: BreadcrumbTypes.CODE_ERROR,\n        category: BreadcrumbsCategorys.Exception,\n        level: TraceDataSeverity.Error,\n        message: event.message,\n        stack: event.error.stack,\n        time: getTimestamp()\n      })\n      this.queue.push(this.setTraceData(traceData))\n    } else {\n      const url = (target as HTMLElement).getAttribute('src') || (target as HTMLElement).getAttribute('href')\n      const traceData: TraceTypeData = {\n        dataId: hashCode(`${(target as HTMLElement).nodeName.toLowerCase()}-${event.message}${url}`),\n        name: 'resource-load-error',\n        level: TraceDataSeverity.Warning,\n        message: event.message,\n        time: getTimestamp(),\n        type: TraceDataTypes.RESOURCE,\n        stack: null\n      }\n      this.resources.push(traceData)\n      this.breadcrumb.push({\n        name: traceData.name,\n        type: BreadcrumbTypes.RESOURCE,\n        category: BreadcrumbsCategorys.Exception,\n        level: TraceDataSeverity.Warning,\n        message: event.message,\n        time: getTimestamp()\n      })\n      this.queue.push(this.setTraceData(traceData))\n    }\n\n  }\n\n  public handleObserverResource(entry: PerformanceResourceTiming) {\n    if (entry.entryType === 'resource') {\n      let level = TraceDataSeverity.Info\n      if (entry.duration > 1000 && entry.duration < 1500) {\n        level = TraceDataSeverity.Warning\n      } else  if (entry.duration > 1500) {\n        level = TraceDataSeverity.Error\n      }\n      entry.duration > 1000 && this.resources.push({\n        url: entry.name,\n        name: `${entry.entryType}-duration-${entry.initiatorType}`,\n        type: TraceDataTypes.PERF,\n        level,\n        message: `duration:${Math.round(entry.duration)}`,\n        time: getTimestamp(),\n        dataId: hashCode(`${entry.entryType}-${entry.name}`),\n      })\n    }\n  }\n\n  // 这里的构造数据有问题，后续需要更新\n  public onFetchError(message: OnFetchError) {\n    console.log('[onFetchError] message: ', message)\n    const traceBaseData: TraceBaseData = {\n      dataId: hashCode(`${message.url}-${message.method}-${message.status}-${message.statusText}`),\n      name: 'fetch-error',\n      level: TraceDataSeverity.Critical,\n      message: '',\n      time: getTimestamp(),\n      type: TraceDataTypes.HTTP\n    }\n    const errorData: TraceDataFetch = {\n      ...traceBaseData,\n      url: message.url,\n      status: message.status,\n      message: message.statusText,\n      method: message.method,\n      body: message.body,\n      elapsedTime: message.elapsedTime,\n      httpType: 'fetch'\n    }\n    console.log('error data: ', errorData)\n    this.queue.push(this.setTraceData(errorData))\n  }\n\n  public onGlobalError() {\n    const _t = this\n    console.log('onGlobalError')\n    window.addEventListener('error', (event) => {\n      _t.saveError(event)\n    })\n    window.addEventListener('unhandledrejection', (event: any) => {\n      // _t.saveError(event)\n      console.log(event)\n      if (event instanceof PromiseRejectionEvent) {\n        const errorEvent = new ErrorEvent(\"promiseRejection\", {\n          message: event.reason.toString(),\n          // filename: event.filename,\n          // lineno: event.lineno,\n          // colno: event.colno,\n          error: event.reason,\n        });\n        _t.saveError(errorEvent);\n      } else if (event instanceof ErrorEvent) {\n        _t.saveError(event);\n      }\n    })\n  }\n\n  public onGlobalClick() {\n    const _t = this\n    window.addEventListener('click', (event) => {\n      const target = event.target as HTMLElement\n      const innerHTML = target.innerHTML\n      const bc: TraceAction = {\n        name: 'click',\n        level: TraceDataSeverity.Normal,\n        type: BreadcrumbTypes.CLICK,\n        category: BreadcrumbsCategorys.User,\n        message: innerHTML,\n        time: getTimestamp()\n      }\n      this.saveBreadcrumb(bc)\n    })\n  }\n\n  public onObserverResource() {\n    const _t = this\n    // const observer = new PerformanceObserver((list, observer) => {\n    //   list.getEntries().forEach((entry) => {\n    //     console.log(`name    : ${entry.name}`);\n    //     console.log(`type    : ${entry.entryType}`);\n    //     console.log(`duration: ${entry.duration}`);\n    //     _t.handleObserverResource(entry)\n    //   });\n    // });\n    // observer.observe({\n    //   entryTypes: [\"resource\"],\n    // });\n  }\n\n  public saveBreadcrumb(data: TraceAction) {\n    if (this.breadcrumbEnabled) {\n      this.breadcrumb.push(data)\n      if (this.breadcrumb.length > this.maxBreadcrumb) {\n        this.breadcrumb.shift()\n      }\n    }\n  }\n\n  public setUserId(userId: string) {\n    this.uid = userId\n  }\n\n  // 初始化实例\n  public static init(options: TraceOptions): BaseTrace {\n    const traceSdk = new BaseTrace(options)\n\n    traceSdk.onGlobalError()\n    // traceSdk.onObserverResource()\n    traceSdk.observer.observe({\n      entryTypes: [\"resource\"],\n    });\n\n    window.fetch = interceptFetch({\n      pagePath: '',\n      onError: (error) => {\n        traceSdk.onFetchError(error)\n      },\n      onBefore: (props: OnBeforeProps) => {\n        traceSdk.saveBreadcrumb({\n          name: 'fetch',\n          level: TraceDataSeverity.Normal,\n          type: BreadcrumbTypes.FETCH,\n          category: BreadcrumbsCategorys.Http,\n          message: props.url,\n          time: getTimestamp(),\n          request: {\n            method: props.method,\n            url: props.url,\n            options: props.options\n          }\n        })\n      },\n      onAfter: (result: any) => {\n        traceSdk.saveBreadcrumb({\n          name: 'fetch',\n          level: TraceDataSeverity.Normal,\n          type: BreadcrumbTypes.FETCH,\n          category: BreadcrumbsCategorys.Http,\n          message: result.status,\n          time: getTimestamp(),\n          response: {\n            status: result.status,\n            statusText: result.statusText\n          }\n        })\n      }\n    })\n\n    // 监听页面性能\n    onVitals(traceSdk.createPerfReport())\n\n    setInterval(() => {\n      console.log('[queue] traceSdk.queue: ', traceSdk.queue)\n      const data = traceSdk.queue.shift()\n      console.log('[queue] data: ', data)\n      if (data) sendByImg(traceSdk.dsn, data)\n    }, traceSdk.sendTimer)\n\n    // @ts-ignore\n    window.traceSdk = traceSdk\n    return traceSdk\n  }\n}\n","import { BaseTrace } from \"./baseTrace\";\n\nexport default class TraceSdk extends BaseTrace {\n\n}\n","import { TraceOptions } from \"./baseTrace\";\nimport TraceSdk from \"./trace\";\n\nlet instance: any;\n\nexport const init = (options: TraceOptions) => {\n\n  if (instance) {\n    return instance\n  }\n  instance = TraceSdk.init(options);\n  console.log('instance: ', instance)\n  return instance\n};\n\n// @ts-ignore\nwindow.traceSdkInit = init\n"],"names":["generateUniqueId","round","onLCP","onFID","onCLS"],"mappings":"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"}